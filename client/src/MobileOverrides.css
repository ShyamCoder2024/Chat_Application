/* EXTREME MOBILE OPTIMIZATIONS - Native App Feel */
@media (max-width: 768px) {

    /* GPU Acceleration for ALL mobile elements */
    * {
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
    }

    html,
    body,
    #root {
        height: 100% !important;
        width: 100% !important;
        overflow: hidden !important;
        margin: 0 !important;
        padding: 0 !important;
        background-color: var(--color-cream) !important;
        -webkit-font-smoothing: antialiased !important;
        -moz-osx-font-smoothing: grayscale !important;
    }

    /* Force Layout Container */
    .chat-layout {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        width: 100% !important;
        height: 100dvh !important;
        display: flex !important;
        flex-direction: column !important;
        background-color: var(--color-cream) !important;
        z-index: 1 !important;
    }

    /* Force Main Content Visibility */
    .chat-layout.mobile-view-chat .main-content {
        position: absolute !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        width: 100% !important;
        height: 100% !important;
        display: flex !important;
        flex-direction: column !important;
        z-index: 999 !important;
        transform: translateZ(0) !important;
        opacity: 1 !important;
        visibility: visible !important;
        background-color: var(--color-cream) !important;
    }

    /* Force Chat Window Expansion with GPU */
    .chat-window {
        display: flex !important;
        flex-direction: column !important;
        flex: 1 !important;
        width: 100% !important;
        height: 100% !important;
        overflow: hidden !important;
        position: relative !important;
        background-color: var(--color-cream) !important;
        transform: translateZ(0) !important;
    }

    /* Force Header - Minimal and Fast */
    .app-header {
        display: flex !important;
        height: 56px !important;
        min-height: 56px !important;
        flex-shrink: 0 !important;
        width: 100% !important;
        background-color: var(--color-white) !important;
        z-index: 1000 !important;
        position: relative !important;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05) !important;
        visibility: visible !important;
        opacity: 1 !important;
    }

    /* Messages Area - Silky Smooth Scroll */
    .messages-area {
        display: flex !important;
        flex-direction: column !important;
        flex: 1 !important;
        width: 100% !important;
        overflow-y: auto !important;
        overflow-x: hidden !important;
        -webkit-overflow-scrolling: touch !important;
        overscroll-behavior-y: contain !important;
        padding: 8px !important;
        background-color: transparent !important;
        min-height: 0 !important;
        transform: translateZ(0) !important;
    }

    /* HIDE ALL scrollbars */
    *::-webkit-scrollbar {
        display: none !important;
        width: 0 !important;
        height: 0 !important;
    }

    * {
        -ms-overflow-style: none !important;
        scrollbar-width: none !important;
    }

    /* Input Area - Sticky Bottom */
    .input-area {
        display: block !important;
        flex-shrink: 0 !important;
        width: 100% !important;
        background-color: var(--color-white) !important;
        z-index: 1000 !important;
        position: relative !important;
        padding-bottom: max(8px, env(safe-area-inset-bottom)) !important;
        visibility: visible !important;
        opacity: 1 !important;
    }

    /* Hide Sidebar in Chat View */
    .chat-layout.mobile-view-chat .sidebar {
        display: none !important;
    }

    /* INSTANT TOUCH FEEDBACK */
    .chat-list-item,
    .message-bubble,
    button,
    .btn {
        transition: transform 0.1s ease, background-color 0.1s ease !important;
    }

    .chat-list-item:active,
    button:active,
    .btn:active {
        transform: scale(0.98) !important;
        opacity: 0.9 !important;
    }

    /* Message Bubble Animations */
    .message-wrapper {
        animation: messageFadeIn 0.15s ease-out !important;
    }

    @keyframes messageFadeIn {
        from {
            opacity: 0;
            transform: translateY(8px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Chat List Item Tap Effect */
    .chat-list-item {
        position: relative !important;
        overflow: hidden !important;
    }

    .chat-list-item::after {
        content: '' !important;
        position: absolute !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        background: rgba(0, 0, 0, 0.03) !important;
        opacity: 0 !important;
        transition: opacity 0.15s ease !important;
        pointer-events: none !important;
    }

    .chat-list-item:active::after {
        opacity: 1 !important;
    }

    /* Optimized Message Bubbles */
    .message-bubble {
        contain: layout style !important;
        will-change: transform !important;
    }

    /* Fast Image Loading */
    .message-image,
    img {
        contain: layout !important;
        content-visibility: auto !important;
    }

    /* Reduce motion for performance */
    @media (prefers-reduced-motion: reduce) {

        *,
        *::before,
        *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
    }
}