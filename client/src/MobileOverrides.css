/* Mobile Overrides - The "Nuclear Option" to fix blank screen */
@media (max-width: 768px) {

    html,
    body,
    #root {
        height: 100% !important;
        width: 100% !important;
        overflow: hidden !important;
        margin: 0 !important;
        padding: 0 !important;
        background-color: var(--color-cream) !important;
    }

    /* Force Layout Container */
    .chat-layout {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        width: 100% !important;
        height: 100dvh !important;
        /* Use dynamic viewport height */
        display: flex !important;
        flex-direction: column !important;
        background-color: var(--color-cream) !important;
        z-index: 1 !important;
    }

    /* Force Main Content Visibility */
    .chat-layout.mobile-view-chat .main-content {
        position: absolute !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        width: 100% !important;
        height: 100% !important;
        display: flex !important;
        flex-direction: column !important;
        z-index: 999 !important;
        /* Super high z-index */
        transform: none !important;
        opacity: 1 !important;
        visibility: visible !important;
        background-color: var(--color-cream) !important;
    }

    /* Force Chat Window Expansion */
    .chat-window {
        display: flex !important;
        flex-direction: column !important;
        flex: 1 !important;
        width: 100% !important;
        height: 100% !important;
        overflow: hidden !important;
        position: relative !important;
        background-color: var(--color-cream) !important;
    }

    /* Force Header Visibility */
    .app-header {
        display: flex !important;
        height: 60px !important;
        /* Slightly smaller on mobile */
        min-height: 60px !important;
        flex-shrink: 0 !important;
        width: 100% !important;
        background-color: var(--color-white) !important;
        z-index: 1000 !important;
        position: relative !important;
        /* Stick to top of flex column */
        border-bottom: 1px solid rgba(0, 0, 0, 0.05) !important;
        visibility: visible !important;
        opacity: 1 !important;
    }

    /* Force Messages Area Expansion - FIXED for Virtuoso */
    .messages-area {
        display: flex !important;
        flex-direction: column !important;
        flex: 1 !important;
        width: 100% !important;
        overflow: hidden !important;
        /* Virtuoso handles internal scroll */
        padding: 10px !important;
        background-color: transparent !important;
        min-height: 0 !important;
        /* Crucial for flex nested scrolling */
    }

    /* Hide ALL scrollbars on mobile */
    *::-webkit-scrollbar {
        display: none !important;
        width: 0 !important;
        height: 0 !important;
    }

    * {
        -ms-overflow-style: none !important;
        scrollbar-width: none !important;
    }

    /* Force Input Area Visibility */
    .input-area {
        display: block !important;
        flex-shrink: 0 !important;
        width: 100% !important;
        background-color: var(--color-white) !important;
        z-index: 1000 !important;
        position: relative !important;
        padding-bottom: max(10px, env(safe-area-inset-bottom)) !important;
        visibility: visible !important;
        opacity: 1 !important;
    }

    /* Hide Sidebar in Chat View */
    .chat-layout.mobile-view-chat .sidebar {
        display: none !important;
    }
}